import{u as S,A as V}from"./use-swrv-1943a49d.js";import{L as B}from"./LoadingPreview-38bddb96.js";import{d as E,r as D,l as F,m as L,o as s,c as d,n as p,t as N,q as y,j as m,e as l,v as q,x as R,u as i,b as h,a as C,A as u,F as $,f as w,g as _,p as x,h as T,y as I}from"./index-2d62b16b.js";import"./modulepreload-polyfill-3cfb730f.js";/* empty css               */const j={class:"side"},z=["src"],M={class:"title"},P={key:0,class:"actions"},W={key:0,class:"child"},G=E({__name:"TreeView",props:{title:{type:String,required:!0},image:{type:String,required:!1}},emits:["click"],setup(g,{emit:f}){const a=g,r=D(!1),v=F(),k=f;function o(){v.default&&(r.value=!r.value),k("click")}return(n,e)=>{const t=L("mdicon");return s(),d("div",{class:q(["tree-view",{"has-child":n.$slots.default,expanded:r.value}])},[p("div",{class:"header","on:click":o},[p("div",j,[p("img",{class:"image",src:a.image},null,8,z),p("span",M,N(a.title),1)]),n.$slots.actions?(s(),d("div",P,[y(n.$slots,"actions",{},void 0,!0)])):m("",!0),n.$slots.default?(s(),l(t,{key:1,class:"switch",name:"chevron-left"})):m("",!0)],32),r.value&&n.$slots.default?(s(),d("div",W,[y(n.$slots,"default",{},void 0,!0)])):m("",!0)],2)}}}),A=R(G,[["__scopeId","data-v-b9209ee4"]]),H={class:"inner"},J={key:0},Y=E({__name:"FoodsView",setup(g){const f=o=>_.showDialog({title:"Delete",text:"Are you sure you want to delete?",handle:async function(){return(await x(`/food/category/${o.uuid}`,{method:"DELETE",data:{uuid:o.uuid}})).status!=200?(_.notify("Error on server side, try later!!!"),!1):(await k(),!0)}}),a=(o,n=!1)=>_.showDialog({title:"Add category",inputs:{image:{placeholder:"Image",type:"image"},name:{placeholder:"Name",min:1,max:100,value:n?o==null?void 0:o.name:null}},handle:async function(e){return o&&!n&&e.append("parent",o.uuid),(await x("/food/category/"+(n?o==null?void 0:o.uuid:"new"),{data:e})).status!=200?(_.notify("Error on server side, try later!!!"),!1):(await k(),!0)}}),{data:r,error:v,mutate:k}=S("/food/category",T);return(o,n)=>(s(),d("div",H,[i(v)?(s(),d("h1",J,"Fail to receive data!")):i(r)!=null?(s(),l(i(V),{key:1,title:"Menu"},{actions:h(()=>[C(i(u),{text:"Add category",onClick:a})]),default:h(()=>[(s(!0),d($,null,w(i(r),e=>(s(),l(i(A),{key:e.uuid,title:e.name,image:e.image,onClick:t=>{var c;(!e.children||((c=e.children)==null?void 0:c.length)==0)&&o.$router.push(`/food/category/${e.uuid}`)}},I({actions:h(()=>{var t;return[C(i(u),{text:"Edit",color:"gold",onClick:()=>a(e,!0)},null,8,["onClick"]),e.has_foods?m("",!0):(s(),l(i(u),{key:0,text:"Add sub category",onClick:()=>a(e)},null,8,["onClick"])),!e.has_foods&&(!e.children||((t=e.children)==null?void 0:t.length)==0)?(s(),l(i(u),{key:1,text:"Remove",onClick:()=>f(e)},null,8,["onClick"])):m("",!0)]}),_:2},[e.children&&e.children.length>0?{name:"default",fn:h(()=>[(s(!0),d($,null,w(e.children,t=>(s(),l(i(A),{key:t.uuid,title:t.name,image:t.image,onClick:c=>{(!t.children||t.children.length==0)&&o.$router.push(`/food/category/${t.uuid}`)}},{actions:h(()=>{var c;return[C(i(u),{text:"Edit",color:"gold",onClick:()=>a(t,!0)},null,8,["onClick"]),!t.has_foods&&(!t.children||((c=t.children)==null?void 0:c.length)==0)?(s(),l(i(u),{key:0,text:"Remove",onClick:()=>f(t)},null,8,["onClick"])):m("",!0)]}),_:2},1032,["title","image","onClick"]))),128))]),key:"0"}:void 0]),1032,["title","image","onClick"]))),128))]),_:1})):(s(),l(i(B),{key:2}))]))}});export{Y as default};
